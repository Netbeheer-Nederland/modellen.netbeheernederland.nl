<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Doorverwijzen...</title>
    <script>
        var newHostname = "netbeheer-nederland.github.io";
        
        // Check of we op de verkeerde host zitten
        if (window.location.hostname !== newHostname) {
            var shouldRedirect = true;
            var now = Date.now();
            
            // Probeer loop detectie via sessionStorage
            try {
                var lastRedirect = sessionStorage.getItem('redirect_timestamp');
                
                // Als er in de afgelopen 1 seconde (1000ms) al een redirect is geweest
                if (lastRedirect && (now - parseInt(lastRedirect)) < 1000) {
                    shouldRedirect = false;
                    console.warn("Redirect loop gedetecteerd. Automatische redirect gestopt.");
                }
            } catch (e) {
                // Als sessionStorage niet werkt (bv. privacy instellingen), doen we niets bijzonders
                console.error(e);
            }

            if (shouldRedirect) {
                // Sla het huidige tijdstip op voordat we redirecten
                try {
                    sessionStorage.setItem('redirect_timestamp', now);
                } catch (e) {}

                var url = new URL(window.location.href);
                url.hostname = newHostname;
                url.protocol = "https:";
                
                // Optioneel: Cache buster toevoegen om de oude 301 cache te omzeilen
                // url.searchParams.set('v', now); 

                window.location.replace(url.href);
            } else {
                // Als we in een loop zitten, tonen we de link handmatig (wordt in de body afgehandeld)
                window.onload = function() {
                    document.body.innerHTML = '<h1>Er ging iets mis met doorverwijzen.</h1>' +
                        '<p>Uw browser heeft oude instellingen onthouden.</p>' +
                        '<p>Gebruik je de Chrome browser ga dan naar <a href="chrome://settings/clearBrowserData">chrome://settings/clearBrowserData</a> om gecachete afbeeldingen en bestanden te verwijderen.</p>'
                        '<p><a href="https://' + newHostname + window.location.pathname + window.location.search + '">Klik hier om naar de nieuwe site te gaan</a>.</p>';
                };
            }
        }
    </script>
</head>
<body>
    <p>Een moment, u wordt doorverwezen...</p>
</body>
</html>